# User Stories for SPEC-005: MoAI-ADK 코어 인프라 및 패키징 시스템

> 5개 핵심 페르소나를 위한 포괄적인 사용자 스토리 (총 17개)

## 📦 패키지 설치 및 초기 설정 관련

### US-001: 원클릭 MoAI-ADK 설치
As a **Python 개발자**
I want to pip install moai-adk로 한 번에 설치하고 바로 사용하고
So that 복잡한 설정 없이 즉시 Spec-First TDD 개발을 시작할 수 있다

수락 기준:
- pip install moai-adk 실행 후 5분 이내에 첫 프로젝트 생성 가능
- Python 3.11+ 환경에서 의존성 충돌 없이 설치 완료
- 설치 완료 시 /moai:1-project 명령어가 즉시 사용 가능
- 설치 과정에서 필수 설정(Claude API 키 등)을 대화형으로 안내

### US-002: 기업 환경 대응 설치 옵션
As a **DevOps 엔지니어**
I want to 프록시/방화벽 환경에서도 안전하게 MoAI-ADK를 설치하고
So that 기업 보안 정책을 준수하면서 팀 전체에 배포할 수 있다

수락 기준:
- 오프라인 패키지 번들(.whl) 제공으로 격리된 환경에서도 설치 가능
- 프록시 설정을 통한 설치 지원 (pip install --proxy)
- 기업용 설정 템플릿 제공 (보안 정책 준수)
- 설치 로그와 검증 스크립트로 compliance 확인 가능

### US-003: 크로스 플랫폼 호환성 보장
As a **팀 리더**
I want to Windows/macOS/Linux 환경에서 동일한 경험을 제공하고
So that 팀원들의 개발 환경이 달라도 일관된 워크플로우를 유지할 수 있다

수락 기준:
- 3개 주요 OS에서 동일한 명령어와 출력 결과 보장
- 경로 구분자, 권한 설정 등의 플랫폼별 차이 자동 처리
- Docker 컨테이너 기반 일관성 확보 옵션 제공
- OS별 설치 가이드와 트러블슈팅 문서 제공

## 🔄 버전 업데이트 및 호환성 관리

### US-004: 무중단 버전 업데이트
As a **Python 개발자**
I want to 진행 중인 프로젝트에 영향 없이 MoAI-ADK를 최신 버전으로 업데이트하고
So that 새로운 기능과 버그 수정을 안전하게 적용할 수 있다

수락 기준:
- pip install --upgrade moai-adk 실행 시 기존 프로젝트 설정 보존
- .moai/ 디렉토리 구조 자동 마이그레이션 (버전별 호환성)
- 업데이트 전 자동 백업 생성 및 롤백 기능 제공
- 버전별 변경사항과 마이그레이션 가이드 자동 표시

### US-005: Constitution 규칙 버전 호환성
As a **팀 리더**
I want to 팀에서 사용 중인 Constitution 원칙이 새 버전에서도 정상 작동하고
So that 기존 프로젝트의 품질 기준을 지속적으로 유지할 수 있다

수락 기준:
- Constitution 5원칙의 하위 호환성 100% 보장
- 새 버전의 추가 규칙은 opt-in 방식으로 적용
- 팀별 Constitution 설정 클라우드 동기화 지원
- 규칙 변경 시 영향받는 프로젝트 자동 스캔 및 리포트

### US-006: 의존성 충돌 자동 해결
As a **DevOps 엔지니어**
I want to 기존 Python 환경과의 의존성 충돌을 자동으로 감지하고 해결하고
So that 다른 도구들과 함께 안정적으로 MoAI-ADK를 운영할 수 있다

수락 기준:
- 설치 전 의존성 충돌 사전 검사 및 경고 제공
- virtual environment 자동 생성 옵션 제공
- 충돌 시 대안 의존성 버전 자동 제안
- 시스템 전역 vs 프로젝트별 설치 옵션 명확히 구분

## 🔌 플러그인 시스템 및 확장성

### US-007: 서드파티 플러그인 설치
As a **플러그인 개발자**
I want to 내가 개발한 MoAI 에이전트를 pip 패키지로 배포하고
So that 다른 개발자들이 쉽게 설치해서 사용할 수 있다

수락 기준:
- pip install moai-plugin-[name] 형태로 플러그인 설치 지원
- 설치된 플러그인이 /moai:[plugin-name] 명령어로 자동 등록
- 플러그인 개발을 위한 BaseAgent 클래스와 템플릿 제공
- 플러그인 버전 호환성 체크 및 의존성 관리

### US-008: 플러그인 품질 검증
As a **팀 리더**
I want to 팀에서 사용하는 서드파티 플러그인의 품질과 보안을 검증하고
So that 신뢰할 수 있는 확장 기능만 도입할 수 있다

수락 기준:
- 플러그인 설치 시 코드 스캔 및 보안 검사 자동 실행
- 공식 인증된 플러그인 목록과 등급 시스템 제공
- 플러그인별 권한 관리 (파일 접근, 네트워크 등)
- 문제 발생 시 플러그인 비활성화 및 격리 기능

### US-009: 커스텀 에이전트 개발 환경
As a **플러그인 개발자**
I want to MoAI-ADK 아키텍처에 맞는 커스텀 에이전트를 쉽게 개발하고
So that 특화된 도메인 요구사항을 해결하는 도구를 만들 수 있다

수락 기준:
- moai create-agent [name] 명령어로 에이전트 템플릿 생성
- 로컬 개발 모드에서 hot-reload 지원으로 실시간 테스트
- 에이전트 개발 가이드와 API 문서 제공
- 16-Core TAG 시스템과의 연동 방법 명시

## ⚙️ 환경 설정 및 구성 관리

### US-010: 글로벌 vs 프로젝트별 설정 관리
As a **Python 개발자**
I want to 개인 선호 설정은 전역으로, 프로젝트 규칙은 로컬로 관리하고
So that 여러 프로젝트 작업 시 각각에 맞는 환경을 자동으로 적용받을 수 있다

수락 기준:
- ~/.moai/config.toml에 개인 설정 (API 키, 선호 모델 등) 저장
- 프로젝트별 .moai/config.toml로 팀 공유 설정 관리
- 설정 우선순위: 프로젝트 > 글로벌 > 기본값 자동 적용
- moai config --list로 현재 적용 중인 설정 확인 가능

### US-011: 팀 설정 동기화 및 공유
As a **팀 리더**
I want to 팀원들이 동일한 개발 환경 설정을 자동으로 공유하고
So that onboarding 시간을 줄이고 일관된 코드 품질을 유지할 수 있다

수락 기준:
- Git 저장소 기반 팀 설정 자동 동기화
- .moai/team-config.json을 통한 강제 적용 규칙 설정
- 새 팀원 합류 시 기존 설정 자동 상속
- 설정 변경 시 팀원들에게 자동 알림 및 적용 확인

### US-012: 환경별 설정 프로파일
As a **DevOps 엔지니어**
I want to 개발/스테이징/프로덕션 환경별로 다른 MoAI 설정을 관리하고
So that 환경 특성에 맞는 최적화된 개발 경험을 제공할 수 있다

수락 기준:
- MOAI_PROFILE 환경변수로 설정 프로파일 전환 (dev/staging/prod)
- 프로파일별 Claude 모델, 권한, 제약사항 구분 적용
- CI/CD 파이프라인에서 프로파일 기반 자동 설정
- 민감정보는 프로파일별로 격리하여 보안 강화

## 🔧 모니터링 및 문제 해결

### US-013: 실시간 시스템 상태 모니터링
As a **DevOps 엔지니어**
I want to MoAI-ADK의 성능과 사용량을 실시간으로 모니터링하고
So that 문제 발생 시 즉시 대응하고 리소스를 최적화할 수 있다

수락 기준:
- moai status --dashboard로 실시간 시스템 상태 확인
- Claude API 사용량, 토큰 비용, 응답 시간 메트릭 수집
- 임계치 초과 시 자동 알림 및 제한 기능
- 사용 패턴 분석을 통한 최적화 제안 제공

### US-014: 자동 진단 및 복구 기능
As a **Python 개발자**
I want to MoAI-ADK 동작 중 문제가 발생하면 자동으로 진단하고 해결하고
So that 개발 흐름이 중단되지 않고 빠르게 정상 상태로 복구할 수 있다

수락 기준:
- moai doctor 명령어로 일반적인 문제 자동 진단
- 파일 권한, API 연결, 의존성 등의 문제 자동 감지
- 감지된 문제에 대한 자동 수정 시도 및 결과 리포트
- 수정 불가능한 문제는 상세한 해결 가이드 제공

### US-015: 로그 수집 및 분석 시스템
As a **팀 리더**
I want to 팀 전체의 MoAI 사용 패턴과 오류를 중앙에서 분석하고
So that 팀 생산성 향상과 문제 예방을 위한 인사이트를 얻을 수 있다

수락 기준:
- 구조화된 로그 포맷으로 모든 활동 기록 (JSON 형태)
- 개인정보 제거한 익명화된 사용 통계 수집 (opt-in)
- 주간/월간 팀 생산성 리포트 자동 생성
- 반복되는 오류 패턴 감지 및 개선 방안 제안

## 🚀 오픈소스 기여 및 커뮤니티

### US-016: 개발 환경 신속 구축
As a **오픈소스 기여자**
I want to MoAI-ADK 개발에 기여하기 위한 환경을 빠르게 구축하고
So that 복잡한 설정 없이 즉시 코드 기여를 시작할 수 있다

수락 기준:
- git clone 후 make dev-setup 한 번으로 개발 환경 완성
- pre-commit hooks, 테스트 환경, 문서 빌드 자동 설정
- Docker 기반 일관된 개발 환경 제공 (./dev.sh 스크립트)
- 기여 가이드라인과 코딩 표준 자동 적용

### US-017: Dogfooding 모드 지원
As a **오픈소스 기여자**
I want to MoAI-ADK 자체 개발에 MoAI-ADK를 사용하는 메타 개발 환경을 경험하고
So that 도구의 실제 사용성을 체험하며 더 나은 개선 방안을 제안할 수 있다

수락 기준:
- moai --dogfooding 모드로 MoAI-ADK 자체 개발 프로세스 체험
- 16-Core TAG 시스템을 활용한 MoAI-ADK 코드베이스 탐색
- 자기 참조적 개발 과정의 메트릭과 인사이트 수집
- 개발 경험 개선을 위한 피드백 수집 및 적용 자동화

## 📋 수락 기준 요약

### 🔧 기술적 요구사항
- Python 3.11+ 호환성 100% 보장
- Poetry/pip 표준 패키지 관리 도구 지원
- 크로스 플랫폼 호환성 (Windows/macOS/Linux)
- Constitution 5원칙 자동 준수 검증

### 📊 성능 목표
- 패키지 설치 시간: < 3분 (일반적인 인터넷 환경)
- 첫 프로젝트 생성까지: < 5분 (API 키 설정 포함)
- 버전 업데이트 시간: < 1분 (기존 설정 보존)
- 플러그인 설치 및 활성화: < 30초

### 🛡️ 신뢰성 및 보안
- 의존성 충돌 사전 감지율: 95% 이상
- 자동 진단 문제 해결율: 80% 이상
- 보안 스캔 통과율: 100% (설치 전 필수)
- 데이터 백업 및 복구 성공률: 100%

### 👥 사용자 경험
- 첫 사용자 성공률: 90% 이상 (가이드 따라하기)
- 팀 설정 동기화 정확도: 100%
- 오류 메시지 명확도: 한국어 완전 지원
- 문제 해결 가이드 만족도: NPS 70+ 목표

---

> **@REQ:CORE-INFRA-001** 태그를 통해 이 사용자 스토리들이 SPEC-005 구현과 추적됩니다.
>
> **5개 페르소나의 17개 사용자 스토리로 MoAI-ADK의 완전한 설치/배포/관리 경험을 설계합니다.**